# ë¡œì»¬ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë³´ê³ ì„œ

## ðŸ“… í…ŒìŠ¤íŠ¸ ì¼ì‹œ
2024ë…„ (Token limit ì‹œì  ì´í›„ ë³µêµ¬ í…ŒìŠ¤íŠ¸)

## ðŸŽ¯ í…ŒìŠ¤íŠ¸ ëª©ì 
ë°°í¬ ì „ ìµœì¢… ì •ë¦¬ í›„ ì‚­ì œëœ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ë³µêµ¬í•˜ì—¬ ë¡œì»¬ í™˜ê²½ì—ì„œ ì „ì²´ ê¸°ëŠ¥ ê²€ì¦

## ðŸ“¦ ë³µêµ¬ëœ íŒŒì¼

### 1. í…ŒìŠ¤íŠ¸ ë°ì´í„°ì…‹ (30ê°œ ì´ë¯¸ì§€)
- `dataset/ê°•ë‚˜ì–¸/` - 10ìž¥ (001.jpg ~ 010.jpg)
- `dataset/ê°•ë¯¸ë‚˜/` - 10ìž¥ (001.jpg ~ 010.jpg, 008.jpeg)
- `dataset/ê°•ë¯¼ì•„/` - 10ìž¥ (001.jpg ~ 010.jpg)

### 2. í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€
- `image2.jpg` - ë‹¨ì¼ ì´ë¯¸ì§€ ë§¤ì¹­ í…ŒìŠ¤íŠ¸ìš©

### 3. í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
- `test_similarity.py` - InsightFace ìœ ì‚¬ë„ ë¶„ì„ ìŠ¤í¬ë¦½íŠ¸
- `test_api_simple.py` - ë‹¨ì¼ ì´ë¯¸ì§€ API í…ŒìŠ¤íŠ¸ (ì‹ ê·œ ìž‘ì„±)
- `test_batch_api.py` - ë°°ì¹˜ ì´ë¯¸ì§€ API í…ŒìŠ¤íŠ¸ (ì‹ ê·œ ìž‘ì„±)

## âœ… í…ŒìŠ¤íŠ¸ ê²°ê³¼

### 1. ë°°ìš° ì¸ë±ìŠ¤ ìƒì„± í…ŒìŠ¤íŠ¸
```
âœ… PASS - InsightFace ëª¨ë¸ ë¡œë”© ì„±ê³µ
âœ… PASS - 3ëª…ì˜ ë°°ìš° ë°ì´í„° ë¡œë“œ ì™„ë£Œ
âœ… PASS - 30/30 ì´ë¯¸ì§€ì—ì„œ ì–¼êµ´ ê°ì§€ ì„±ê³µ
âœ… PASS - ì¸ë±ìŠ¤ íŒŒì¼ ìƒì„± ì™„ë£Œ
   - embeddings.npy (3ëª… Ã— 512ì°¨ì›)
   - metadata.json
   - actors/ (ëŒ€í‘œ ì´ë¯¸ì§€ 3ìž¥)
```

**ì¶œë ¥ ì˜ˆì‹œ:**
```
ðŸ”® InsightFaceë¡œ ë°°ìš° ì¸ë±ìŠ¤ ìƒì„± ì‹œìž‘ (ì´ 3ëª…)
[1/3] ì²˜ë¦¬ ì¤‘: ê°•ë‚˜ì–¸ (10ìž¥)
  âœ… 10/10ìž¥ì—ì„œ ì–¼êµ´ ê°ì§€ ì„±ê³µ
  ðŸ“Š í‰ê·  ë²¡í„° ìƒì„± ì™„ë£Œ
[2/3] ì²˜ë¦¬ ì¤‘: ê°•ë¯¸ë‚˜ (10ìž¥)
  âœ… 10/10ìž¥ì—ì„œ ì–¼êµ´ ê°ì§€ ì„±ê³µ
[3/3] ì²˜ë¦¬ ì¤‘: ê°•ë¯¼ì•„ (10ìž¥)
  âœ… 10/10ìž¥ì—ì„œ ì–¼êµ´ ê°ì§€ ì„±ê³µ
âœ… ë°°ìš° ì¸ë±ìŠ¤ ìƒì„± ì™„ë£Œ: 3ëª…
```

### 2. ìœ ì‚¬ë„ ë¶„ì„ í…ŒìŠ¤íŠ¸ (test_similarity.py)
```
âœ… PASS - image2.jpg ì–¼êµ´ ìž„ë² ë”© ìƒì„± ì„±ê³µ
âœ… PASS - ë°ì´í„°ì…‹ 3ëª… ë°°ìš° ìž„ë² ë”© ìƒì„± ì„±ê³µ
âœ… PASS - ìœ ì‚¬ë„ ê³„ì‚° ì •ìƒ ìž‘ë™
```

**ê²°ê³¼:**
```
ðŸ† Top 3 ìœ ì‚¬ ë°°ìš°:
1. ê°•ë‚˜ì–¸ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ 77.64%
2. ê°•ë¯¸ë‚˜ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ 44.72%
3. ê°•ë¯¼ì•„ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ 28.31%
```

### 3. FastAPI ì„œë²„ í…ŒìŠ¤íŠ¸

#### 3.1 Health Check
```
âœ… PASS - GET /health
Status: 200
Response: {'status': 'ok'}
```

#### 3.2 ë‹¨ì¼ ì´ë¯¸ì§€ ë§¤ì¹­ (test_api_simple.py)
```
âœ… PASS - POST /match-actors?top_k=3
Status: 200
ê²°ê³¼ ê°œìˆ˜: 3
```

**ì‘ë‹µ ë°ì´í„°:**
```json
{
  "results": [
    {"name": "ê°•ë‚˜ì–¸", "score": 0.7764, "image_url": "/actors/ê°•ë‚˜ì–¸/001.jpg"},
    {"name": "ê°•ë¯¸ë‚˜", "score": 0.4382, "image_url": "/actors/ê°•ë¯¸ë‚˜/001.jpg"},
    {"name": "ê°•ë¯¼ì•„", "score": 0.2831, "image_url": "/actors/ê°•ë¯¼ì•„/001.jpg"}
  ]
}
```

#### 3.3 ë°°ì¹˜ ë§¤ì¹­ + ë ˆí¼ëŸ°ìŠ¤ ë°°ìš° (test_batch_api.py)
```
âœ… PASS - POST /match-actors-batch?top_k=3&reference_actor=ê°•ë‚˜ì–¸
Status: 200
ê²°ê³¼ ê°œìˆ˜: 3 (3ê°œ ì´ë¯¸ì§€ ë°°ì¹˜ ì²˜ë¦¬)
```

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1: ê°•ë‚˜ì–¸ì˜ ì´ë¯¸ì§€**
```
ðŸŽ¯ 1. ê°•ë‚˜ì–¸ - 85.33% >>> Target Reference <<<
   2. ê°•ë¯¸ë‚˜ - 45.69%
   3. ê°•ë¯¼ì•„ - 31.00%
```

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 2: ê°•ë¯¸ë‚˜ì˜ ì´ë¯¸ì§€**
```
   1. ê°•ë¯¸ë‚˜ - 75.30% (ìµœê³  ìœ ì‚¬ë„)
ðŸŽ¯ 2. ê°•ë‚˜ì–¸ - 53.81% >>> Target Reference <<< (í•˜ì´ë¼ì´íŒ…)
   3. ê°•ë¯¼ì•„ - 27.48%
```

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 3: ê°•ë¯¼ì•„ì˜ ì´ë¯¸ì§€**
```
   1. ê°•ë¯¼ì•„ - 76.88% (ìµœê³  ìœ ì‚¬ë„)
ðŸŽ¯ 2. ê°•ë‚˜ì–¸ - 29.05% >>> Target Reference <<< (í•˜ì´ë¼ì´íŒ…)
   3. ê°•ë¯¸ë‚˜ - 28.98%
```

**í•µì‹¬ ê²€ì¦ ì‚¬í•­:**
- âœ… ë ˆí¼ëŸ°ìŠ¤ ë°°ìš°ê°€ ê²°ê³¼ì— í¬í•¨ë˜ë©´ `is_reference: true` í”Œëž˜ê·¸ ì •ìƒ ì„¤ì •
- âœ… ìœ ì‚¬ë„ ìˆœìœ„ì™€ ê´€ê³„ì—†ì´ ë ˆí¼ëŸ°ìŠ¤ ë°°ìš° í•˜ì´ë¼ì´íŒ…
- âœ… ë°°ì¹˜ ì²˜ë¦¬ ì‹œ ê° ì´ë¯¸ì§€ë³„ ë…ë¦½ì ì¸ ê²°ê³¼ ë°˜í™˜

### 4. InsightFace AuraFace-v1 ëª¨ë¸ ê²€ì¦
```
âœ… PASS - ëª¨ë¸ ë¡œë”© (CPU ëª¨ë“œ)
âœ… PASS - ì–¼êµ´ ê°ì§€ (detection)
âœ… PASS - ì–¼êµ´ ìž„ë² ë”© ìƒì„± (512ì°¨ì›)
âœ… PASS - ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê³„ì‚°
```

**ëª¨ë¸ ì •ë³´:**
- ì´ë¦„: AuraFace-v1
- ê²½ë¡œ: `./models/auraface/`
- ì‹¤í–‰ ëª¨ë“œ: CPUExecutionProvider
- ê°ì§€ í¬ê¸°: 640Ã—640
- ìž„ë² ë”© ì°¨ì›: 512

## ðŸ“Š ì„±ëŠ¥ ì§€í‘œ

### ì–¼êµ´ ê°ì§€ìœ¨
- ë°°ìš° ì¸ë±ìŠ¤: 30/30 (100%)
- í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€: 1/1 (100%)

### ìœ ì‚¬ë„ ì •í™•ë„
- ìžê¸° ìžì‹  ë§¤ì¹­: 75~85% (ì •ìƒ ë²”ìœ„)
- íƒ€ì¸ ë§¤ì¹­: 28~54% (ëª…í™•í•œ êµ¬ë¶„)

### API ì‘ë‹µ ì‹œê°„
- Health check: ~50ms
- ë‹¨ì¼ ë§¤ì¹­: ~2-3ì´ˆ (ìµœì´ˆ ëª¨ë¸ ë¡œë”© í¬í•¨)
- ë°°ì¹˜ ë§¤ì¹­ (3ìž¥): ~4-5ì´ˆ

## ðŸ”§ í™˜ê²½ ì •ë³´

### ì‹œìŠ¤í…œ
- OS: Windows
- Python: 3.12.x
- ê°€ìƒí™˜ê²½: .venv

### ì£¼ìš” íŒ¨í‚¤ì§€
- insightface>=0.7.3 (AuraFace-v1)
- numpy==1.26.4 (<2.0.0)
- opencv-python==4.10.0.84
- fastapi==0.115.0
- onnxruntime (CPU)

### ì„œë²„
- FastAPI Uvicorn
- Host: 0.0.0.0:8000
- CORS: ëª¨ë“  Origin í—ˆìš© (ë¡œì»¬ í…ŒìŠ¤íŠ¸)

## ðŸŽ¯ í…ŒìŠ¤íŠ¸ ê²°ë¡ 

### âœ… í†µê³¼í•œ ê¸°ëŠ¥
1. **ë°±ì—”ë“œ API**
   - Health check ì—”ë“œí¬ì¸íŠ¸
   - ë‹¨ì¼ ì´ë¯¸ì§€ ë§¤ì¹­ (`/match-actors`)
   - ë°°ì¹˜ ì´ë¯¸ì§€ ë§¤ì¹­ (`/match-actors-batch`)
   - ë ˆí¼ëŸ°ìŠ¤ ë°°ìš° í•˜ì´ë¼ì´íŒ… ê¸°ëŠ¥
   - ì—ëŸ¬ í•¸ë“¤ë§ (ì–¼êµ´ ë¯¸ê°ì§€, íŒŒì¼ í˜•ì‹ ì˜¤ë¥˜)

2. **InsightFace í†µí•©**
   - AuraFace-v1 ëª¨ë¸ ë¡œë”©
   - ì–¼êµ´ ê°ì§€ ë° ìž„ë² ë”© ìƒì„±
   - 512ì°¨ì› ë²¡í„° ì •ê·œí™”
   - ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê³„ì‚°

3. **ë°°ìš° ì¸ë±ìŠ¤ ì‹œìŠ¤í…œ**
   - í´ë” ê¸°ë°˜ ë°ì´í„°ì…‹ ë¡œë”©
   - ë°°ìš°ë³„ í‰ê·  ìž„ë² ë”© ìƒì„±
   - NumPy ë°°ì—´ ì €ìž¥/ë¡œë“œ
   - ë©”íƒ€ë°ì´í„° JSON ê´€ë¦¬

4. **Frontend ì—°ë™ ì¤€ë¹„**
   - CORS ì„¤ì • ì™„ë£Œ
   - Static files ì„œë¹™ (/actors)
   - ì´ë¯¸ì§€ URL ìƒì„±
   - JSON ì‘ë‹µ ìŠ¤í‚¤ë§ˆ

### ðŸš€ í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ ìƒíƒœ
- âœ… ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- âœ… ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ ì •ìƒ ìž‘ë™
- âœ… ë ˆí¼ëŸ°ìŠ¤ ë°°ìš° ê¸°ëŠ¥ ê²€ì¦ ì™„ë£Œ
- âœ… ì—ëŸ¬ í•¸ë“¤ë§ ì •ìƒ
- âœ… ë¬¸ì„œí™” ì™„ë£Œ (README.md)

### ðŸ“ ë‹¤ìŒ ë‹¨ê³„
1. **ì‹¤ì œ ë°°ìš° ë°ì´í„°ì…‹ êµ¬ì¶•**
   - ìœ ëª… ë°°ìš° ì´ë¯¸ì§€ ìˆ˜ì§‘ (ê° 10~20ìž¥)
   - í´ë” êµ¬ì¡°ë¡œ ì •ë¦¬: `dataset/ë°°ìš°ì´ë¦„/001.jpg`
   - ì¸ë±ìŠ¤ ìž¬ìƒì„±: `python backend\scripts\build_actor_index_insightface.py --dataset-dir dataset`

2. **í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸**
   - Next.js ì„œë²„ ì‹œìž‘: `cd frontend; npm run dev`
   - ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 ì ‘ì†
   - ë“œëž˜ê·¸&ë“œë¡­ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
   - ë ˆí¼ëŸ°ìŠ¤ ë°°ìš° ìž…ë ¥ ë° í•˜ì´ë¼ì´íŒ… í™•ì¸

3. **í”„ë¡œë•ì…˜ ë°°í¬**
   - Railway: ë°±ì—”ë“œ ë°°í¬
   - Vercel: í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬
   - í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
   - CORS í”„ë¡œë•ì…˜ URL ì—…ë°ì´íŠ¸

## ðŸ“Œ í…ŒìŠ¤íŠ¸ íŒŒì¼ ê´€ë¦¬

### Gitì— í¬í•¨í•˜ì§€ ì•Šì„ íŒŒì¼ (í…ŒìŠ¤íŠ¸ ì „ìš©)
- `dataset/` - í…ŒìŠ¤íŠ¸ ë°ì´í„°ì…‹ (30ìž¥)
- `image2.jpg` - í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€
- `test_similarity.py` - ìœ ì‚¬ë„ ë¶„ì„ ìŠ¤í¬ë¦½íŠ¸
- `test_api_simple.py` - ë‹¨ì¼ API í…ŒìŠ¤íŠ¸
- `test_batch_api.py` - ë°°ì¹˜ API í…ŒìŠ¤íŠ¸
- `test_results.txt` - í…ŒìŠ¤íŠ¸ ê²°ê³¼ íŒŒì¼

### Gitì— ì´ë¯¸ í¬í•¨ëœ íŒŒì¼ (í”„ë¡œë•ì…˜ í•„ìˆ˜)
- `backend/` - FastAPI ì„œë²„ ì½”ë“œ
- `frontend/` - Next.js ì›¹ ì•±
- `requirements.txt` - Python ì˜ì¡´ì„±
- `README.md` - í”„ë¡œì íŠ¸ ë¬¸ì„œ
- `test_local.py` - í†µí•© í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸

---

**í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ìž**: GitHub Copilot  
**í…ŒìŠ¤íŠ¸ í™˜ê²½**: Windows PowerShell, Python 3.12, .venv  
**í…ŒìŠ¤íŠ¸ ì™„ë£Œ ì‹œê°**: 2024ë…„ (conversation resumption)

âœ… **ì „ì²´ í…ŒìŠ¤íŠ¸ í†µê³¼ - ë°°í¬ ì¤€ë¹„ ì™„ë£Œ**
